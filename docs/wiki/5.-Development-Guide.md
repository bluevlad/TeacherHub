# 5. 개발 가이드 (Development Guide)

## 5.1 개발 환경 설정

### 사전 요구사항

| 도구 | 버전 | 필수 |
|------|------|------|
| Docker Desktop | 최신 | O |
| Git | 2.30+ | O |
| Node.js | 18+ | △ (로컬 개발 시) |
| Java | 17+ | △ (로컬 개발 시) |
| Python | 3.10+ | △ (크롤러 개발 시) |

### 저장소 클론

```bash
git clone https://github.com/bluevlad/TeacherHub.git
cd TeacherHub
```

---

## 5.2 Docker 기반 실행

### 전체 서비스 실행

```bash
# 개발 환경
docker-compose up -d

# 로그 확인
docker-compose logs -f

# 서비스 중지
docker-compose down
```

### 개별 서비스 실행

```bash
# Backend만 재시작
docker-compose restart backend

# Frontend만 재빌드
docker-compose up -d --build frontend

# DB 컨테이너 접속
docker exec -it teacherhub-db psql -U teacherhub -d teacherhub
```

### 서비스 URL

| 서비스 | URL |
|--------|-----|
| Frontend | http://localhost:3000 |
| Backend API | http://localhost:8081 |
| PostgreSQL | localhost:5432 |

---

## 5.3 로컬 개발 (Docker 없이)

### Backend (Spring Boot)

```bash
cd backend

# Gradle Wrapper 사용
./gradlew bootRun --args='--spring.profiles.active=local'

# 또는 직접 실행
./gradlew build
java -jar build/libs/teacherhub-0.0.1-SNAPSHOT.jar
```

### Frontend (React)

```bash
cd frontend

# 의존성 설치
npm install

# 개발 서버 실행
npm start

# 빌드
npm run build
```

### AI Crawler (Python)

```bash
cd ai-crawler

# 가상환경 생성
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 의존성 설치
pip install -r requirements.txt

# Playwright 브라우저 설치
playwright install chromium

# 실행
python src/main.py
```

---

## 5.4 프로젝트 구조

### Backend

```
backend/
├── build.gradle
├── src/main/java/com/teacherhub/
│   ├── TeacherHubApplication.java
│   ├── controller/
│   │   ├── ReportController.java     # 기간별 리포트 API
│   │   └── TeacherController.java    # 강사 관리 API
│   ├── dto/
│   │   ├── PeriodReportDTO.java
│   │   └── PeriodSummaryDTO.java
│   ├── entity/
│   │   ├── Academy.java
│   │   ├── Teacher.java
│   │   ├── DailyReport.java
│   │   └── ...
│   ├── repository/
│   │   └── DailyReportRepository.java
│   └── service/
│       └── ReportService.java
└── src/main/resources/
    ├── application.yml
    └── application-local.yml
```

### Frontend

```
frontend/
├── package.json
├── public/
│   └── index.html
└── src/
    ├── App.js                    # 앱 엔트리
    ├── api/
    │   └── index.js              # API 클라이언트
    ├── components/
    │   └── PeriodSelector.js     # 기간 선택 컴포넌트
    └── pages/
        └── Dashboard.js          # 대시보드 페이지
```

### AI Crawler

```
ai-crawler/
├── requirements.txt
├── Dockerfile
└── src/
    ├── main.py                   # 엔트리포인트
    ├── crawlers/
    │   └── dcinside.py           # 디시인사이드 크롤러
    ├── analyzers/
    │   └── sentiment.py          # 감성 분석
    └── models/
        └── entities.py           # SQLAlchemy 모델
```

---

## 5.5 코딩 컨벤션

### Java (Backend)

```java
// 클래스명: PascalCase
public class ReportController {

    // 메서드명: camelCase
    public PeriodReportDTO getDailyReport(LocalDate date) {
        // 변수명: camelCase
        List<DailyReport> dailyReports = repository.findByDate(date);
        return convertToDTO(dailyReports);
    }

    // 상수: UPPER_SNAKE_CASE
    private static final int DEFAULT_LIMIT = 30;
}
```

### JavaScript (Frontend)

```javascript
// 컴포넌트: PascalCase
const PeriodSelector = ({ onPeriodChange }) => {
    // 상태: camelCase
    const [periodType, setPeriodType] = useState('daily');

    // 핸들러: handle 접두사
    const handleChange = (event) => {
        setPeriodType(event.target.value);
    };

    return <div>...</div>;
};

// 상수: UPPER_SNAKE_CASE
const API_BASE_URL = 'http://localhost:8081';
```

### Python (Crawler)

```python
# 클래스명: PascalCase
class DCInsideCrawler:

    # 메서드명: snake_case
    def fetch_posts(self, gallery_id: str) -> list:
        # 변수명: snake_case
        post_list = []
        return post_list

# 상수: UPPER_SNAKE_CASE
MAX_RETRIES = 3
```

---

## 5.6 Git 워크플로우

### 브랜치 전략

```
main ─────────────────────────────────────────────▶
  │
  ├── feature/period-selector ──────┐
  │                                 │
  └── bugfix/api-error ─────────────┤
                                    │
prod ◀─────────────────────────────-┘
```

| 브랜치 | 용도 |
|--------|------|
| `main` | 개발 브랜치 |
| `prod` | 운영 배포 브랜치 |
| `feature/*` | 기능 개발 |
| `bugfix/*` | 버그 수정 |

### 커밋 메시지 규칙

```
<type>: <subject>

<body>

<footer>
```

| Type | 설명 |
|------|------|
| feat | 새 기능 추가 |
| fix | 버그 수정 |
| docs | 문서 수정 |
| refactor | 리팩토링 |
| test | 테스트 |
| chore | 기타 변경 |

예시:
```
feat: 일별/주별/월별 기간 조회 기능 구현

- Backend: ReportController 추가
- Frontend: PeriodSelector 컴포넌트 추가
- ISO 8601 주차 계산 적용
```

### Pull Request

```bash
# 기능 브랜치 생성
git checkout -b feature/new-feature

# 작업 후 커밋
git add .
git commit -m "feat: 새 기능 추가"

# 푸시
git push origin feature/new-feature

# PR 생성 (gh CLI)
gh pr create --title "feat: 새 기능 추가" --body "설명..."
```

---

## 5.7 테스트

### Backend 테스트

```bash
cd backend

# 전체 테스트
./gradlew test

# 특정 테스트 클래스
./gradlew test --tests ReportControllerTest

# 테스트 리포트 확인
open build/reports/tests/test/index.html
```

### Frontend 테스트

```bash
cd frontend

# 전체 테스트
npm test

# 특정 파일 테스트
npm test -- --testPathPattern=Dashboard.test.js

# 커버리지
npm test -- --coverage
```

---

## 5.8 디버깅

### Backend 로그

```bash
# Docker 로그
docker logs -f teacherhub-backend

# 로그 레벨 변경 (application.yml)
logging:
  level:
    com.teacherhub: DEBUG
```

### Frontend 디버깅

```javascript
// 개발자 도구 콘솔
console.log('API Response:', response.data);

// React DevTools 설치
// Chrome Extension: React Developer Tools
```

### DB 쿼리 확인

```bash
# PostgreSQL 컨테이너 접속
docker exec -it teacherhub-db psql -U teacherhub -d teacherhub

# 쿼리 실행
SELECT * FROM daily_reports LIMIT 10;

# 테이블 구조 확인
\d daily_reports
```

---

[← API 명세](./4.-API-Specification) | [다음: 배포 →](./6.-Deployment)
